#!/usr/bin/env ruby
# appium ruby console = arc
require 'rubygems'

def print_version
  require 'appium_console/version'
  require 'appium_lib/version'
  puts "appium_console: v#{::AppiumConsole::VERSION}"
  puts "    appium_lib: v#{::AppiumLib::VERSION}"
end

ARGV.each do |a|
  if a.match /-?-?v/i
    print_version
    exit
  elsif a.match /upgrade/i
    [ 'gem uninstall -aIx appium_lib',
      'gem uninstall -aIx appium_console',
      'gem install --no-rdoc --no-ri appium_console'
     ].each { |cmd| puts cmd; `#{cmd}` }
    print_version
    puts "Upgrade complete."
    exit
  end
end

require 'appium_console'
